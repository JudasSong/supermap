<!DOCTYPE>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title data-i18n="resources.title_toggleMaps"></title>
    <style type="text/css">
    .editPane {
        position: absolute;
        right: 50px;
        top: 50px;
        text-align: center;
        background: #FFF;
        display: inline-block;
        z-index: 1000;
    }
    </style>
</head>

<body style=" margin: 0;overflow: hidden;background: #fff;width: 100%;height:100%;position: absolute;top: 0;">
    <div class='panel panel-primary editPane' id='editPane' style="z-index: 99999">
        <div class='panel-heading'>
            <h5 class='panel-title text-center' data-i18n="resources.text_toggleMaps"></h5>
        </div>
        <div class='panel-body' id='params'>
            <p></p>
            <div align='center' class='input-group'>
                <input type='button' id='btn1' class='btn btn-primary' data-i18n="[value]resources.btn_toggleMaps" onclick="changeMap()" />
            </div>
        </div>
    </div>
    <div id="map" style="margin:0 auto;width: 100%;height: 100%"></div>
    <script type="text/javascript" include="bootstrap" src="../js/include-web.js"></script>
    <script type="text/javascript" exclude="iclient-classic" src="../../dist/include-classic.js"></script>
    <script type="text/javascript">
    var host = window.isLocal ? window.server : "http://10.10.0.113:8090";
    var map, layerXJ, layerALT, bt = false;
    var url1 = host + "/iserver/services/map-China-XinJiang/rest/maps/XinJiang_Citys@China_Citys";
    var url2 = host + "/iserver/services/map-China-XinJiang/rest/maps/aLeTai@XinJiang_County";

    map = new SuperMap.Map("map", {
        controls: [
            new SuperMap.Control.ScaleLine(),
            new SuperMap.Control.OverviewMap(),
            new SuperMap.Control.Zoom(),
            new SuperMap.Control.Navigation({
                dragPanOptions: {
                    enableKinetic: true
                }
            })
        ],
        allOverlays: false
    });
    layerXJ = new SuperMap.Layer.TiledDynamicRESTLayer("XinJiang_Citys@China_Citys", url1, {
        transparent: true,
        cacheEnabled: true
    });
    layerALT = new SuperMap.Layer.TiledDynamicRESTLayer("aLeTai@XinJiang_County", url2, {
        transparent: true,
        cacheEnabled: true
    });


    layerXJ.events.on({
        "layerInitialized": function() {
            layerALT.events.on({
                "layerInitialized": function() {
                    layerXJ.isBaseLayer = true;
                    layerALT.isBaseLayer = true;
                    map.addLayers([layerXJ,layerALT]);
                    map.setCenter(new SuperMap.LonLat(9453654.35 , 5190100.64), 0);
                }
            });
        }
    });


    //添加click事件
    // map.events.on({"click": function(info){
    //     debugger
    // }});

    function changeMap() {
        if (bt == false) {
            layerXJ.setVisibility(false);
            layerALT.setVisibility(true);
            map.setCenter(new SuperMap.LonLat(9829577.16 , 5963012.82), 0);
            map.setBaseLayer(layerALT);
            bt = true;
        } else if (bt == true) {
            layerXJ.setVisibility(true);
            layerALT.setVisibility(false);
            map.setCenter(new SuperMap.LonLat(9453654.35 , 5190100.64), 0);
            map.setBaseLayer(layerXJ);
            bt = false;
        }
    }
    </script>
</body>

</html>