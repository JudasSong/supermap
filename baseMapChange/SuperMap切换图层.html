<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <title>SuperMap iClient for JavaScript:TiledDynamicRESTLayer</title>
    <style>
    body {
        margin: 0;
        overflow: hidden;
        background: #fff;
    }

    #map {
        position: relative;
        height: 800px;
        border: 1px solid #3473b7;
    }

    #toolbar {
        position: relative;
        padding-top: 5px;
        padding-bottom: 10px;
    }
    </style>
    <!--ÒýÓÃÐèÒªµÄ½Å±¾-->
    <script src="./libs/SuperMap.Include.js"></script>
    <script type="text/javascript">
    //ÉùÃ÷±äÁ¿map¡¢layer¡¢url
    //var map, layer,url = "http://support.supermap.com.cn:8090/iserver/services/map-world/rest/maps/World";
    var map, layer;
    //´´½¨µØÍ¼¿Ø¼þ
    var map, layerDay, layerNight, bt = false;
    var url1 = "http://support.supermap.com.cn:8090/iserver/services/map-world/rest/maps/世界地图_Day";
    var url2 = "http://support.supermap.com.cn:8090/iserver/services/map-world/rest/maps/世界地图_Night";

    function init() {
        map = new SuperMap.Map("map", {
            controls: [
                new SuperMap.Control.ScaleLine(),
                new SuperMap.Control.OverviewMap(),
                new SuperMap.Control.Zoom(),
                new SuperMap.Control.Navigation({
                    dragPanOptions: {
                        enableKinetic: true
                    }
                })
            ],
            allOverlays: false
        });
        layerDay = new SuperMap.Layer.TiledDynamicRESTLayer("世界地图_Day", url1, { transparent: true, cacheEnabled: true });
        layerDay.events.on({ "layerInitialized": addLayer1 });
    }

    function addLayer1() {
        layerNight = new SuperMap.Layer.TiledDynamicRESTLayer("世界地图_Night", url2, { transparent: true, cacheEnabled: true });
        layerNight.events.on({ "layerInitialized": addLayer2 });
    }

    function addLayer2() {
        layerDay.isBaseLayer = true;
        layerNight.isBaseLayer = true;
        map.addLayers([layerDay, layerNight]);
        map.setCenter(new SuperMap.LonLat(109.797986, 39.628674), 6);
    }

    function changeMap() {
        if (bt == false) {
            layerDay.setVisibility(false);
            layerNight.setVisibility(true);
            map.setBaseLayer(layerNight);
            bt = true;
        } else if (bt == true) {
            layerDay.setVisibility(true);
            layerNight.setVisibility(false);
            map.setBaseLayer(layerDay);
            bt = false;
        }
    }
    </script>
</head>

<body onload="init()">
    <!--µØÍ¼ÏÔÊ¾µÄdiv-->
    <div id="toolbar">
        <input id="btn" class="btn" type="button" value="µ×Í¼ÇÐ»»" onclick="changeMap()" />
    </div>
    <div id="map"></div>
</body>

</html>